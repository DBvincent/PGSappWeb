function inputView(){$("#tel").focus(function(){openButton(),("手机号不能为空"==$(this).attr("placeholder")||"手机号输入有误"==$(this).attr("placeholder"))&&($(this).removeClass("error"),$(this).attr("placeholder","请输入手机号码"),$(this).val("")),$(this).attr("type","tel"),$(this).css("color","#666666")}),$("#pass").focus(function(){openButton(),("您输入的密码格式有误"==$(this).attr("placeholder")||"密码不能为空"==$(this).attr("placeholder"))&&($(this).removeClass("error"),$(this).attr("placeholder","字母+数字组合，大于等于8位"),$(this).val("")),$(this).css("color","#666666")}),$("#verification").focus(function(){openButton(),"错误"==$(this).attr("placeholder")&&($(this).removeClass("error"),$(this).attr("placeholder","错误,请重新获取"),$(this).val("")),$(this).css("color","#666666")}),$("#choose").focus(function(){openButton(),console.log(1),check="true"==check?"false":"true"}),$("#tel").blur(function(){verifyTelphone(this)}),$("#pass").blur(function(){checkPass(this)}),$("#verification").blur(function(){verifyNumber(this)})}function clickView(){$("#news").click(function(){getAjax("POST","../../guest/register/passcode",headers,JSON.stringify({cellphone:$("#tel").val(),CV:"10"}),getVerificationCode)}),$("#btn").click(function(){console.log("进入提交"),$("#choose").is(":checked")?verify()&&(getData(),toAjax("POST","../../guest/register/new",headers,registerData,submitRequest)):($("#layer p").html("请阅读点击用户协议"),$("#layer").fadeIn(),$("#layer").fadeOut(2e3))}),$("#user").click(function(a){a.preventDefault(),save(),self.location="https://disp-dashboard.banketech.com/static/files/agreement.html"}),$("#city").click(function(){$(this).css("color","#666666"),openButton()}),$("#city").click(function(){$(".footer").hide()})}function getData(){registerData.cellphone=$("#tel").val(),registerData.password=$("#pass").val(),registerData.businessCityCode=$("#city").attr("data-code"),registerData.passcode=$("#verification").val(),registerData.registerCode=GetQueryString("requestId")}function popPeer(a){var b=new LArea;b.init({trigger:"#city",keys:{id:"code",name:"name"},type:1,data:a,idx:1}),b.className=["area_company"]}function checkPass(a){var b=$(a).val();/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,}$/.test(b)?""==b?($(a).addClass("error"),$(a).val(""),$(a).attr("placeholder","密码不能为空"),closeButton()):$(a).val(b):($(a).addClass("error"),$(a).val(""),closeButton(),$(a).attr("placeholder","您输入的密码格式有误"))}function verifyTelphone(a){var b=$(a).val();""==b?($(a).addClass("error"),$(a).val(""),$(a).attr("placeholder","手机号不能为空"),closeButton()):/^1[34578]\d{9}$/.test(b)?$(a).val(b):($(a).addClass("error"),$(a).val(""),$(a).attr("placeholder","手机号输入有误"),closeButton())}function verifyNumber(a){var b=$(a).val();""==b?($(a).addClass("error"),$(a).val(""),$(a).attr("placeholder","验证码错误"),closeButton()):$(a).val(b)}function verifyCity(a){var b=$(a).html();"请选择"==b?($(a).html("业务城市不能为空"),$(a).css("color","#ef6762"),closeButton()):($(a).html(b),$(a).css("color","#666666"))}function removeByValue(a,b){for(var c=0;c<a.length;c++)if(a[c].name==b){a.splice(c,1);break}}function verify(){return""==$("#tel").val()||""==$("#pass").val()||""==$("#verification").val()||"常驻城市不能为空"==$("#city").html()?(verifyTelphone($("#tel")),checkPass($("#pass")),verifyNumber($("#verification")),verifyCity($("#city")),closeButton(),!1):(console.log("填写成功"),openButton(),!0)}function closeButton(){$("#btn").attr("disabled","disabled"),$("#btn").css("background","#d3d3d3")}function openButton(){$("#btn").removeAttr("disabled"),$("#btn").css("background","#fec43f")}function errorTip(a,b,c,d){closeButton(),$("#layer p").html(b),$("#layer").fadeIn(c),$("#layer").fadeOut(d,function(){$("#verification").val(""),openButton()})}function successTip(a){$("#layer p").html(a),$("#layer").fadeIn(),$("#layer").fadeOut(1e3,function(){localStorage.clear(),self.location=download})}function getBusinessCityData(a){a.succeed?(removeByValue(a.data,"客户挖掘中心"),$.map(a.data,function(a){a.name=a.name.split("分公司")[0]}),popPeer(a.data)):errorTip(a,"服务器开小差，请稍后再试",1e3,2e3)}function getVerificationCode(a){a.succeed?($("#news").attr("disabled","disabled"),$("#layer p").html("验证码已奔向您的手机，请等待"),$("#layer").fadeIn(),$("#layer").fadeOut(2e3,function(){$("#news").removeAttr("disabled")}),registerData.requestId=a.data):errorTip(a,a.message,1e3,2e3)}function submitRequest(a){a.succeed?successTip("注册成功，正在跳转下载页面"):errorTip(a,a.message,1e3,2e3)}function getAjax(a,b,c,d,e){$.ajax({type:a,url:b,headers:c,data:d,success:function(a){e(a)},error:function(a){errorTip(a,"服务器开小差，请稍后再试",1e3,3e5)}})}function toAjax(a,b,c,d,e){$.ajax({type:a,url:b,headers:c,data:JSON.stringify(d),success:function(a){e(a)},error:function(a){errorTip(a,"服务器开小差，请稍后再试",1e3,3e5)}})}function GetQueryString(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?c[2]:null}function save(){localStorage.setItem("isFrist","1"),localStorage.setItem("tel",$("#tel").val()),localStorage.setItem("pass",$("#pass").val()),localStorage.setItem("dataCode",$("#city").attr("data-code")),localStorage.setItem("city",$("#city").html()),localStorage.setItem("passcode",$("#verification").val())}function find(){var b,c,d,e,a=window.localStorage;for(b=0,c=a.length;c>b;b++)d=a.key(b),e=a.getItem(d),obj[d]=e,console.log(d+"="+e);console.log(obj)}function isFrist(a){"1"==a.isFrist&&(a.tel&&$("#tel").val(a.tel),a.pass&&$("#pass").val(a.pass),a.dataCode&&$("#city").attr("data-code",a.dataCode),"请选择"!=a.city&&$("#city").html(a.city),a.passcode&&$("#verification").val(a.passcode),localStorage.clear())}var download="http://a.app.qq.com/o/simple.jsp?pkgname=com.dashuf.disp.v2",registerData={cv:"10",source:"registerHtml"},headers={"content-type":"application/json"},check="false",obj={};$(function(){find(),isFrist(obj),getAjax("POST","../../guest/dictionary/businessCities",headers," ",getBusinessCityData),inputView(),clickView()});